<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#CC543A">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.ico?v=7.4.1">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.ico?v=7.4.1">
  <link rel="mask-icon" href="/images/logo.svg?v=7.4.1" color="#CC543A">

<link rel="stylesheet" href="/css/main.css?v=7.4.1">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.4.1',
    exturl: false,
    sidebar: {"position":"left","width":300,"display":"post","offset":12,"onmobile":true},
    copycode: {"enable":true,"show_result":true,"style":"flat"},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#CC543A","save":"auto"},
    fancybox: true,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'å¤åˆ¶',
      copy_success: 'å¤åˆ¶æˆåŠŸ',
      copy_failure: 'å¤åˆ¶å¤±è´¥'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="å‰æ–¹é«˜èƒ½ï¼è¿™ç¯‡ç¬”è®°æ–­æ–­ç»­ç»­èŠ±äº†è¿‘10å¤©ï¼Œæ€è·¯ã€ç»“æ„è¾ƒä¸ºæ··æ²Œï¼Œå¦‚æœæ²¡æœ‰å……åˆ†åšå¥½å¿ƒç†å‡†å¤‡ï¼Œå»ºè®®ç«‹åˆ»å…³é—­çª—å£ã€‚ï¼ˆå…¶å®å°±æ˜¯æˆ‘å†™å®Œå®åœ¨ä¸æ„¿å®¡é˜…ï¼‰             é¦–å…ˆè¯´æ˜ï¼Œå¼‚æ­¥æ˜¯æä¸ºé«˜æ·±çš„é«˜çº§ç¼–ç¨‹æŠ€æœ¯ï¼Œè¿™ç¯‡æ–‡ç« åªæ˜¯æ‰ç–å­¦æµ…çš„æˆ‘é˜…è¯»æ–‡æ¡£ä¹‹åçš„ä¸€äº›æ€è€ƒä¸ç†è§£ï¼Œå¯èƒ½æœ‰æå¤šæè¿°ä¸å‡†ç¡®ä¹ƒè‡³å®Œå…¨é”™è¯¯ä¹‹å¤„ï¼Œè¿˜æœ›æ‰¹è¯„æŒ‡å¯¼ã€‚é¡ºä¾¿åæ§½ï¼ŒC#æ–‡æ¡£ç¿»è¯‘å¾—å®åœ¨æ˜¯å¤ªçƒ‚äº†ï¼Œå¾ˆå¤šåœ°æ–¹ä¸€çœ‹å°±æ˜¯æœºç¿»çš„ï¼Œå´æ²¡æœ‰">
<meta name="keywords" content="ç¬”è®°,C Sharp">
<meta property="og:type" content="article">
<meta property="og:title" content="C#æ‚è®°ä¹‹è‚†ï¼šå¼‚æ­¥">
<meta property="og:url" content="https:&#x2F;&#x2F;hakurei.red&#x2F;2020&#x2F;04&#x2F;08&#x2F;C-%E6%9D%82%E8%AE%B0%E4%B9%8B%E8%82%86&#x2F;index.html">
<meta property="og:site_name" content="åšä¸½æµèŠ³åˆ†ç¤¾ | Macyrate">
<meta property="og:description" content="å‰æ–¹é«˜èƒ½ï¼è¿™ç¯‡ç¬”è®°æ–­æ–­ç»­ç»­èŠ±äº†è¿‘10å¤©ï¼Œæ€è·¯ã€ç»“æ„è¾ƒä¸ºæ··æ²Œï¼Œå¦‚æœæ²¡æœ‰å……åˆ†åšå¥½å¿ƒç†å‡†å¤‡ï¼Œå»ºè®®ç«‹åˆ»å…³é—­çª—å£ã€‚ï¼ˆå…¶å®å°±æ˜¯æˆ‘å†™å®Œå®åœ¨ä¸æ„¿å®¡é˜…ï¼‰             é¦–å…ˆè¯´æ˜ï¼Œå¼‚æ­¥æ˜¯æä¸ºé«˜æ·±çš„é«˜çº§ç¼–ç¨‹æŠ€æœ¯ï¼Œè¿™ç¯‡æ–‡ç« åªæ˜¯æ‰ç–å­¦æµ…çš„æˆ‘é˜…è¯»æ–‡æ¡£ä¹‹åçš„ä¸€äº›æ€è€ƒä¸ç†è§£ï¼Œå¯èƒ½æœ‰æå¤šæè¿°ä¸å‡†ç¡®ä¹ƒè‡³å®Œå…¨é”™è¯¯ä¹‹å¤„ï¼Œè¿˜æœ›æ‰¹è¯„æŒ‡å¯¼ã€‚é¡ºä¾¿åæ§½ï¼ŒC#æ–‡æ¡£ç¿»è¯‘å¾—å®åœ¨æ˜¯å¤ªçƒ‚äº†ï¼Œå¾ˆå¤šåœ°æ–¹ä¸€çœ‹å°±æ˜¯æœºç¿»çš„ï¼Œå´æ²¡æœ‰">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;04&#x2F;08&#x2F;7TIPufG6oAm2cOd.png">
<meta property="og:updated_time" content="2020-05-17T00:51:18.242Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;i.loli.net&#x2F;2020&#x2F;04&#x2F;08&#x2F;7TIPufG6oAm2cOd.png">
  <link rel="canonical" href="https://hakurei.red/2020/04/08/C-%E6%9D%82%E8%AE%B0%E4%B9%8B%E8%82%86/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>C#æ‚è®°ä¹‹è‚†ï¼šå¼‚æ­¥ | åšä¸½æµèŠ³åˆ†ç¤¾ | Macyrate</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <!-- APlayer start -->

  <!-- Native Mode

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css">
  <div id="aplayer"></div>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>
  <script type="text/javascript" src="/js/music.js"></script>

  -->

  <!--MetingJS Mode-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css">
  
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script>
  <div class="aplayer" 
  data-id="31128857" 
  data-server="netease" 
  data-type="playlist" 
  data-fixed="true" 
  data-autoplay="true" 
  data-order="random" 
  data-volume="0.55" 
  data-theme="#cc543a" 
  data-preload="auto" >
  </div>
  <script src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script>
  <meting-js
    server="netease"
    type="playlist"
    id="60198">
  </meting-js>

  <!---->

  <!-- APlayer end -->

<script>
  (function(d) {
    var config = {
      kitId: 'tzu7ura',
      scriptTimeout: 3000,
      async: true
    },
    h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
  })(document);
</script>

  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta custom-logo">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span> 
        <img src="https://i.loli.net/2020/07/16/efIqXZQjrg9n5hs.png" > 
        </span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    <!--
      <a>
        <img class="custom-logo-image" src="https://i.loli.net/2020/07/16/efIqXZQjrg9n5hs.png" alt="åšä¸½æµèŠ³åˆ†ç¤¾ | Macyrate">
      </a>
    -->
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£</a>

  </li>
        <li class="menu-item menu-item-lab">

    <a href="/lab/" rel="section"><i class="fa fa-fw fa-flask"></i>å®éªŒ</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="æœç´¢..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://hakurei.red/2020/04/08/C-%E6%9D%82%E8%AE%B0%E4%B9%8B%E8%82%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://i.loli.net/2020/02/23/5FnPOvDaUVpytfX.jpg">
      <meta itemprop="name" content="Macyrate">
      <meta itemprop="description" content="&nbsp;&nbsp;æ°£éœ½é¢¨æ¢³æ–°æŸ³é«®ï¼Œ<br>&nbsp;&nbsp;å†°æ¶ˆæµªæ´—èˆŠè‹”é ˆã€‚">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="åšä¸½æµèŠ³åˆ†ç¤¾ | Macyrate">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          C#æ‚è®°ä¹‹è‚†ï¼šå¼‚æ­¥
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-04-08 22:58:53" itemprop="dateCreated datePublished" datetime="2020-04-08T22:58:53+08:00">2020-04-08</time>
            </span>

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <div class="note warning">
            <p><strong>å‰æ–¹é«˜èƒ½ï¼</strong><br>è¿™ç¯‡ç¬”è®°æ–­æ–­ç»­ç»­èŠ±äº†è¿‘10å¤©ï¼Œæ€è·¯ã€ç»“æ„è¾ƒä¸ºæ··æ²Œï¼Œå¦‚æœæ²¡æœ‰å……åˆ†åšå¥½å¿ƒç†å‡†å¤‡ï¼Œå»ºè®®ç«‹åˆ»å…³é—­çª—å£ã€‚<br>ï¼ˆå…¶å®å°±æ˜¯æˆ‘å†™å®Œå®åœ¨ä¸æ„¿å®¡é˜…ï¼‰</p>
          </div>

<p>é¦–å…ˆè¯´æ˜ï¼Œå¼‚æ­¥æ˜¯<strong>æä¸ºé«˜æ·±</strong>çš„é«˜çº§ç¼–ç¨‹æŠ€æœ¯ï¼Œè¿™ç¯‡æ–‡ç« åªæ˜¯æ‰ç–å­¦æµ…çš„æˆ‘é˜…è¯»æ–‡æ¡£ä¹‹åçš„ä¸€äº›æ€è€ƒä¸ç†è§£ï¼Œå¯èƒ½æœ‰æå¤šæè¿°ä¸å‡†ç¡®ä¹ƒè‡³å®Œå…¨é”™è¯¯ä¹‹å¤„ï¼Œè¿˜æœ›æ‰¹è¯„æŒ‡å¯¼ã€‚é¡ºä¾¿åæ§½ï¼ŒC#æ–‡æ¡£ç¿»è¯‘å¾—å®åœ¨æ˜¯å¤ªçƒ‚äº†ï¼Œå¾ˆå¤šåœ°æ–¹ä¸€çœ‹å°±æ˜¯æœºç¿»çš„ï¼Œå´æ²¡æœ‰æœºç¿»è­¦å‘Šã€‚å¾ˆå¤šåœ°æ–¹ç™¾æ€ä¸å¾—å…¶è§£çš„è¯ï¼Œåˆ‡æ¢åˆ°è‹±è¯­å°±å‘ç°å…¶å®å¾ˆç®€å•ï¼Œç¿»è¯‘çš„ç”¨è¯å®Œå…¨é”™è¯¯ï¼Œéš¾å—å•Šï¼</p>
<h1 id="ä½•ä¸ºå¼‚æ­¥"><a href="#ä½•ä¸ºå¼‚æ­¥" class="headerlink" title="ä½•ä¸ºå¼‚æ­¥"></a>ä½•ä¸ºå¼‚æ­¥</h1><p>ä¸å¼‚æ­¥ç›¸å¯¹çš„æ˜¯â€œåŒæ­¥â€ï¼Œä»£è¡¨ç€ä¸€å¥ä»£ç çš„æ‰§è¡Œç»“æŸæ˜¯å…¶åä¸€å¥ä»£ç çš„æ‰§è¡Œå¼€å§‹ï¼Œæ•´ä¸ªæµç¨‹æ˜¯æŒ‰ç…§å›ºå®šçš„é¡ºåºè¿›è¡Œçš„ï¼Œè¿™æ˜¯ä¸€èˆ¬ç¨‹åºçš„é€»è¾‘ã€‚ç„¶è€Œï¼ŒæŸäº›è¯­å¥å¯èƒ½éœ€è¦èŠ±è¾ƒé•¿æ—¶é—´æ‰èƒ½å¾—åˆ°ç»“æœâ€”â€”æ¯”å¦‚ç½‘ç»œé€šä¿¡å’Œæ–‡ä»¶è¯»å†™â€”â€”è¿™äº›è¯­å¥çš„æ‰§è¡Œå¹¶ä¸æ€ä¹ˆå ç”¨CPUï¼Œä½†ä¼šé˜»å¡æ•´ä¸ªçº¿ç¨‹ï¼Œåç»­çš„è¯­å¥éœ€è¦ç­‰å¾…è¿™äº›è¯­å¥æ‰§è¡Œå®Œæˆï¼Œé€ æˆå¤§é‡çš„æµªè´¹ã€‚ç‰¹åˆ«æ˜¯å¦‚æœç½‘ç»œç¯å¢ƒå¾ˆä¸å¥½ã€è¯»å–çš„æ–‡ä»¶å¥½å‡ ä¸ªGï¼Œé‚£å¯æ˜¯å°¤å…¶è¦å‘½ï¼Œå¯èƒ½æ•´ä¸ªç¨‹åºéƒ½ä¼šå‡ºç°è‚‰çœ¼å¯è§çš„å¡é¡¿ç”šè‡³å´©æºƒã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ç§é£å¿«çš„CPUä¸é¾Ÿçˆ¬çš„IOä¹‹é—´çš„ä¸å¹³è¡¡ï¼Œä¼ ç»Ÿçš„æ–¹æ¡ˆæ˜¯å•ç‹¬å¼€ä¸ªçº¿ç¨‹è®©å®ƒå»æ‰§è¡Œè€—æ—¶çš„æ“ä½œï¼Œè®©ä¸»çº¿ç¨‹ç»§ç»­è¿è¡Œä¸è€—æ—¶æ“ä½œçš„ç»“æœæ— å…³çš„ä»£ç ã€‚ä½†æ˜¯çº¿ç¨‹æ“ä½œå¾ˆéº»çƒ¦ã€å¼€é”€å¾ˆé«˜ï¼Œçº¿ç¨‹æ•°é‡ä¹Ÿæœ‰é™ï¼Œä¸æ˜¯èƒ½éšä¾¿ä½¿ç”¨çš„ï¼Œæ‰€ä»¥ä¾ç„¶ä¸æ˜¯ä¸ªå®Œç¾çš„æ–¹æ³•ã€‚</p>
<p>å¼‚æ­¥å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜è€Œå­˜åœ¨çš„ã€‚å½“ä»£ç éœ€è¦æ‰§è¡Œä¸€ä¸ªè€—æ—¶çš„æ“ä½œæ—¶ï¼Œå®ƒåªå‘å‡ºæŒ‡ä»¤ï¼Œå¹¶ä¸ç­‰å¾…ç»“æœï¼Œç„¶åå°±å»æ‰§è¡Œå…¶ä»–ä»£ç äº†ã€‚ä¸€æ®µæ—¶é—´åï¼Œå½“è€—æ—¶æ“ä½œè¿”å›ç»“æœæ—¶ï¼Œå†é€šçŸ¥CPUè¿›è¡Œå¤„ç†ã€‚</p>
<a id="more"></a>

<h1 id="æ€ä¹ˆä½¿ç”¨"><a href="#æ€ä¹ˆä½¿ç”¨" class="headerlink" title="æ€ä¹ˆä½¿ç”¨"></a>æ€ä¹ˆä½¿ç”¨</h1><p>ä»C# 5å¼€å§‹ï¼Œç¼–å†™å¼‚æ­¥ç¨‹åºå˜å¾—æ¯”è¾ƒå®¹æ˜“ã€‚</p>
<p>C#çš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å‹ä¸»è¦é€šè¿‡ä¸¤ä¸ªå…³é”®å­—æ¥ä½¿ç”¨ï¼š<code>async</code>å’Œ<code>await</code>ã€‚</p>
<h2 id="ç”¨æ—©é¤æ¯æ‰ç¾å¥½çš„ä¸€å¤©"><a href="#ç”¨æ—©é¤æ¯æ‰ç¾å¥½çš„ä¸€å¤©" class="headerlink" title="ç”¨æ—©é¤æ¯æ‰ç¾å¥½çš„ä¸€å¤©"></a>ç”¨æ—©é¤æ¯æ‰ç¾å¥½çš„ä¸€å¤©</h2><p>å…ˆæ¥ä¸€æ®µåŒæ­¥çš„æ†¨æ†¨ä»£ç ï¼Œè¿™æè¿°äº†ä¸€ä¸ªâ€œåšæ—©é¤â€çš„æµç¨‹ï¼š</p>
<ol>
<li>å€’ä¸€æ¯å’–å•¡ã€‚</li>
<li>åŠ çƒ­å¹³åº•é”…ï¼Œç„¶åç…ä¸¤ä¸ªé¸¡è›‹ã€‚</li>
<li>ç…ä¸‰ç‰‡åŸ¹æ ¹ã€‚</li>
<li>çƒ¤ä¸¤ç‰‡é¢åŒ…ã€‚</li>
<li>åœ¨çƒ¤é¢åŒ…ä¸ŠåŠ é»„æ²¹å’Œæœé…±ã€‚</li>
<li>å€’ä¸€æ¯æ©™æ±ã€‚</li>
</ol>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Coffee cup = PourCoffee();          <span class="comment">//å€’å’–å•¡</span></span><br><span class="line">    Console.WriteLine(<span class="string">"coffee is ready"</span>);</span><br><span class="line">    Egg eggs = FryEggs(<span class="number">2</span>);              <span class="comment">//ç…è›‹</span></span><br><span class="line">    Console.WriteLine(<span class="string">"eggs are ready"</span>);</span><br><span class="line">    Bacon bacon = FryBacon(<span class="number">3</span>);          <span class="comment">//ç…åŸ¹æ ¹</span></span><br><span class="line">    Console.WriteLine(<span class="string">"bacon is ready"</span>);</span><br><span class="line">    Toast toast = ToastBread(<span class="number">2</span>);        <span class="comment">//çƒ¤é¢åŒ…</span></span><br><span class="line">    ApplyButter(toast);                 <span class="comment">//æ¶‚é»„æ²¹</span></span><br><span class="line">    ApplyJam(toast);                    <span class="comment">//æ¶‚æœé…±</span></span><br><span class="line">    Console.WriteLine(<span class="string">"toast is ready"</span>);</span><br><span class="line">    Juice oj = PourOJ();                <span class="comment">//å€’æ©™æ±</span></span><br><span class="line">    Console.WriteLine(<span class="string">"oj is ready"</span>);</span><br><span class="line"></span><br><span class="line">    Console.WriteLine(<span class="string">"Breakfast is ready!"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>çº¿æ€§çš„é€»è¾‘å¾ˆç®€å•ï¼Œä½†æœ‰å¤§é—®é¢˜ã€‚ç…è›‹ã€ç…åŸ¹æ ¹å’Œçƒ¤é¢åŒ…éƒ½è¦èŠ±å¾ˆé•¿æ—¶é—´ï¼Œå…¶å®å®Œå…¨å¯ä»¥åœ¨åšç…è›‹å’ŒåŸ¹æ ¹çš„åŒæ—¶ï¼Œè®©é¢åŒ…è‡ªå·±åœ¨é¢åŒ…æœºé‡Œçƒ¤ã€‚ä¸ç„¶è¿˜æ²¡ç­‰é¢åŒ…çƒ¤å®Œï¼Œåˆ«çš„ä¸œè¥¿æ—©å‡‰é€äº†ï¼Œåƒäº†å¯èƒ½è¿˜ä¼šå¼•èµ·è‚ èƒƒä¸é€‚ã€‚ç…è›‹å’Œç…åŸ¹æ ¹ç”šè‡³ä¹Ÿæ²¡å¿…è¦ä¸€å‰ä¸€åâ€”â€”è°å®¶è¿˜æ²¡æœ‰ä¸¤ä¸ªé”…å‘¢ï¼Ÿæˆ–è€…æ‰¾ä¸ªå¤§ç‚¹çš„é”…æ¥ä¸€èµ·ç…ä¹Ÿè¡Œå•Šã€‚</p>
<h2 id="å¼‚æ­¥åšæ—©é¤"><a href="#å¼‚æ­¥åšæ—©é¤" class="headerlink" title="å¼‚æ­¥åšæ—©é¤"></a>å¼‚æ­¥åšæ—©é¤</h2><p>æ¥çœ‹çœ‹ä¸€ä¸ªè¿‘ä¹å®Œç¾çš„â€œåšæ—©é¤è§£å†³æ–¹æ¡ˆâ€æ˜¯æ€æ ·çš„ã€‚ä¸‹é¢æ˜¯C#æ–‡æ¡£é‡Œçš„ç¤ºèŒƒå¼‚æ­¥ä»£ç ï¼Œæˆ‘æ“…è‡ªæ·»åŠ äº†äº›æ–¹ä¾¿ç†è§£çš„æ²™é›•æ³¨é‡Šï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">async</span> Task <span class="title">Main</span>(<span class="params"><span class="keyword">string</span>[] args</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Coffee cup = PourCoffee();          <span class="comment">//å€’æ¯å’–å•¡</span></span><br><span class="line">    Console.WriteLine(<span class="string">"coffee is ready"</span>);</span><br><span class="line">    <span class="keyword">var</span> eggsTask = FryEggsAsync(<span class="number">2</span>);     <span class="comment">//å¾—ç…ä¿©é¸¡è›‹ï¼Œå¼€æ•´ï¼</span></span><br><span class="line">    <span class="keyword">var</span> baconTask = FryBaconAsync(<span class="number">3</span>);   <span class="comment">//å¾—ç…ä»¨åŸ¹æ ¹ï¼Œå¼€æ•´ï¼</span></span><br><span class="line">    <span class="keyword">var</span> toastTask = MakeToastWithButterAndJamAsync(<span class="number">2</span>);  <span class="comment">//å¾—æä¸¤ç‰‡æ¶‚é»„æ²¹å’Œæœé…±çš„é¢åŒ…ï¼Œå¼€æ•´ï¼</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> allTasks = <span class="keyword">new</span> List&lt;Task&gt;&#123;eggsTask, baconTask, toastTask&#125;;  <span class="comment">//åˆ—ä¸ªä»»åŠ¡æ¸…å•å§</span></span><br><span class="line">    <span class="keyword">while</span> (allTasks.Any())  <span class="comment">//çœ‹æ¥æ¸…å•é‡Œè¿˜æœ‰ä»»åŠ¡æ²¡æå®Œ</span></span><br><span class="line">    &#123;</span><br><span class="line">        Task finished = <span class="keyword">await</span> Task.WhenAny(allTasks);   <span class="comment">//ä¸‹ä¸€ä¸ªå®Œæˆçš„ä»»åŠ¡æ˜¯å•¥ï¼Ÿ</span></span><br><span class="line">        <span class="keyword">if</span> (finished == eggsTask)   <span class="comment">//å™¢ï¼Œæ˜¯é¸¡è›‹ç…å¥½äº†ï¼</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">"eggs are ready"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (finished == baconTask)     <span class="comment">//å™¢ï¼Œæ˜¯åŸ¹æ ¹ç…å¥½äº†ï¼</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">"bacon is ready"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (finished == toastTask)     <span class="comment">//å™¢ï¼Œæ˜¯é¢åŒ…åšå®Œäº†ï¼</span></span><br><span class="line">        &#123;</span><br><span class="line">            Console.WriteLine(<span class="string">"toast is ready"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        allTasks.Remove(finished);      <span class="comment">//è¡Œï¼ŒæŠŠå®Œæˆçš„ä»»åŠ¡ä»æ¸…å•é‡Œåˆ’äº†</span></span><br><span class="line">    &#125;</span><br><span class="line">    Juice oj = PourOJ();    <span class="comment">//æœ€åå†æ¥æ¯æ©™æ±ï¼Œå®Œäº‹</span></span><br><span class="line">    Console.WriteLine(<span class="string">"oj is ready"</span>);</span><br><span class="line">    Console.WriteLine(<span class="string">"Breakfast is ready!"</span>);   <span class="comment">//çˆ½åˆ°</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">async</span> Task&lt;Toast&gt; <span class="title">MakeToastWithButterAndJamAsync</span>(<span class="params"><span class="keyword">int</span> number</span>)</span></span><br><span class="line"><span class="function"></span>    &#123;</span><br><span class="line">        <span class="keyword">var</span> toast = <span class="keyword">await</span> ToastBreadAsync(number);      <span class="comment">//è¦å¤„ç†é¢åŒ…å¾—å…ˆç­‰é¢åŒ…çƒ¤å¥½</span></span><br><span class="line">        ApplyButter(toast);     <span class="comment">//æ¶‚ç‚¹é»„æ²¹</span></span><br><span class="line">        ApplyJam(toast);        <span class="comment">//æ¶‚ç‚¹æœé…±</span></span><br><span class="line">        <span class="keyword">return</span> toast;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç²—ç•¥ä¸€çœ‹ï¼Œæ¡è‰ï¼Œæ„Ÿè§‰é­”æ”¹æˆå¼‚æ­¥ä¹‹åå¤æ‚äº†å¥½å¤šã€‚å…¶å®ä¸ç„¶ï¼Œæˆ‘æ…¢æ…¢æ¥åˆ†æã€‚</p>
<h3 id="å®šä¹‰å¼‚æ­¥æ–¹æ³•"><a href="#å®šä¹‰å¼‚æ­¥æ–¹æ³•" class="headerlink" title="å®šä¹‰å¼‚æ­¥æ–¹æ³•"></a>å®šä¹‰å¼‚æ­¥æ–¹æ³•</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> eggsTask = FryEggsAsync(<span class="number">2</span>);     <span class="comment">//å¾—ç…ä¿©é¸¡è›‹ï¼Œå¼€æ•´ï¼</span></span><br><span class="line"><span class="keyword">var</span> baconTask = FryBaconAsync(<span class="number">3</span>);   <span class="comment">//å¾—ç…ä»¨åŸ¹æ ¹ï¼Œå¼€æ•´ï¼</span></span><br><span class="line"><span class="keyword">var</span> toastTask = MakeToastWithButterAndJamAsync(<span class="number">2</span>);  <span class="comment">//å¾—æä¸¤ç‰‡æ¶‚é»„æ²¹å’Œæœé…±çš„é¢åŒ…ï¼Œå¼€æ•´ï¼</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> allTasks = <span class="keyword">new</span> List&lt;Task&gt;&#123;eggsTask, baconTask, toastTask&#125;;  <span class="comment">//åˆ—ä¸ªä»»åŠ¡æ¸…å•å§</span></span><br></pre></td></tr></table></figure>

<p>å¯ä»¥æ³¨æ„åˆ°ï¼Œè¿™ä¸€æ®µä½¿ç”¨çš„å‡ ä¸ªæ–¹æ³•ï¼Œå…¶åç§°éƒ½åœ¨åé¢åŠ äº†ä¸ªâ€œAsyncâ€ï¼Œè¿™æ˜¯å¼‚æ­¥æ–¹æ³•çš„å‘½åè§„èŒƒã€‚è°ƒç”¨ä¸‰ä¸ªå¼‚æ­¥æ–¹æ³•ï¼Œå°±æ˜¯è®¾ç½®äº†ä¸‰ä¸ªä»»åŠ¡ï¼ˆTaskï¼‰ã€‚é‚£è°è°ï¼Œç…§è¿™ä¸ªä»»åŠ¡å»æ‰§è¡Œå§ï¼æˆ‘è¦æ¥ç€è·‘åé¢çš„ä»£ç äº†ã€‚</p>
<p>é‚£ä¹ˆï¼Œæ€ä¹ˆå®šä¹‰ä¸€ä¸ªå¼‚æ­¥æ–¹æ³•å‘¢ï¼Ÿæ¥çœ‹ä¸Šé¢ç¤ºä¾‹ä¸­çš„è¿™ä¸ªæ–¹æ³•ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">async</span> Task&lt;Toast&gt; <span class="title">MakeToastWithButterAndJamAsync</span>(<span class="params"><span class="keyword">int</span> number</span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> toast = <span class="keyword">await</span> ToastBreadAsync(number);      <span class="comment">//è¦å¤„ç†é¢åŒ…å¾—å…ˆç­‰é¢åŒ…çƒ¤å¥½</span></span><br><span class="line">    ApplyButter(toast);     <span class="comment">//æ¶‚ç‚¹é»„æ²¹</span></span><br><span class="line">    ApplyJam(toast);        <span class="comment">//æ¶‚ç‚¹æœé…±</span></span><br><span class="line">    <span class="keyword">return</span> toast;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆï¼Œæ–¹æ³•å®šä¹‰çš„å‰é¢æœ‰<code>async</code>ä¿®é¥°ç¬¦ï¼Œè¿™ç›´æ¥è¯´æ˜äº†æ­¤æ–¹æ³•æ˜¯å¼‚æ­¥ï¼ˆ<strong>async</strong>hronousï¼‰çš„ã€‚</p>
<p>å¼‚æ­¥æ–¹æ³•è¿”å›çš„æ˜¯<code>Task&lt;TResult&gt;</code>ç±»å‹ï¼Œä»£è¡¨ç€è¿™ä¸ªä»»åŠ¡ï¼ˆTaskï¼‰çš„ç»“æœæ˜¯<code>TResult</code>æ‰€ä»£è¡¨çš„ç±»å‹ã€‚æ¯”å¦‚ä¸€ä¸ªè¿”å›ç±»å‹ä¸º<code>Toast</code>çš„åŒæ­¥æ–¹æ³•ï¼Œå…¶å¼‚æ­¥ç‰ˆæœ¬çš„è¿”å›ç±»å‹å°±åº”è¯¥æ˜¯<code>Task&lt;Toast&gt;</code>ï¼Œä»£è¡¨ç€ä¸€ä¸ªâ€œçƒ¤é¢åŒ…ï¼ˆToastï¼‰â€çš„ä»»åŠ¡ï¼ˆTaskï¼‰ã€‚</p>
<p><strong><code>async</code>å¼‚æ­¥æ–¹æ³•çš„å­˜åœ¨ï¼Œè¦ä¾é åŒ…å«<code>await</code>è¿ç®—ç¬¦çš„è¡¨è¾¾å¼æˆ–è¯­å¥ã€‚åè¿‡æ¥è¯´ï¼Œå¼‚æ­¥æ–¹æ³•é‡Œå¿…é¡»å¾—æœ‰<code>await</code>çš„å­˜åœ¨ã€‚</strong> ä¸Šé¢çš„ä»£ç é‡Œï¼Œ<code>Main</code>æ–¹æ³•æœ¬èº«ä¹Ÿæ˜¯è¢«<code>async</code>ä¿®é¥°çš„ï¼Œå°±æ˜¯å› ä¸ºMainæ–¹æ³•é‡Œä¹Ÿç”¨åˆ°äº†<code>await</code>è¯­å¥ã€‚</p>
<h3 id="è®¾ç½®å‰ç½®æ¡ä»¶"><a href="#è®¾ç½®å‰ç½®æ¡ä»¶" class="headerlink" title="è®¾ç½®å‰ç½®æ¡ä»¶"></a>è®¾ç½®å‰ç½®æ¡ä»¶</h3><p><code>async</code>æ˜¯ç”¨æ¥å®šä¹‰å¼‚æ­¥æ–¹æ³•çš„ï¼Œé‚£<code>await</code>æ˜¯å¹²ä»€ä¹ˆçš„å‘¢ï¼ŸæŒ‰ç…§å­—é¢æ„æ€æ¥ç†è§£å°±å¥½ï¼Œâ€œç­‰å¾…â€ã€‚å¼‚æ­¥æ–¹æ³•è¿è¡Œåˆ°è¿™é‡Œå°±å¼€å§‹ç­‰å¾…ï¼Œç›´åˆ°<code>await</code>çš„æ“ä½œæ•°æ‰€è¡¨ç¤ºçš„å¼‚æ­¥æ“ä½œï¼ˆä¸€ä¸ª<code>Task&lt;TResult&gt;</code>ï¼‰æ‰§è¡Œå®Œæ¯•ã€‚<strong>ä¸€æ—¦å¼‚æ­¥æ“ä½œå®Œæˆï¼Œ<code>await</code>è¿ç®—ç¬¦å°±ä»<code>Task&lt;TResult&gt;</code>çš„ä»»åŠ¡é‡Œï¼Œè·å–ä»»åŠ¡çš„æœ€ç»ˆç»“æœï¼Œä»¥<code>TResult</code>ç±»å‹è¿”å›ï¼Œç„¶åå†ç»§ç»­è¿è¡Œåç»­ä»£ç ã€‚</strong> è¿™è¯´æ˜<code>await</code>æ‰€ç­‰å¾…çš„ä»»åŠ¡çš„ç»“æœæ˜¯åç»­æ“ä½œçš„å‰ç½®æ¡ä»¶ã€‚ä¸Šé¢è¿™ä¸ªå¼‚æ­¥æ–¹æ³•ç¬¬ä¸€å¥å°±åœ¨<code>await</code>ï¼Œè¿™æ˜¯å› ä¸ºåé¢æŠ¹é»„æ²¹å’Œæœé…±çš„æµç¨‹éƒ½å¿…é¡»å»ºç«‹åœ¨â€œçƒ¤å®Œé¢åŒ…â€çš„å‰ç½®æ¡ä»¶ä¸Šã€‚</p>
<p>ç„¶è€Œï¼Œæˆ‘ä»¬å¸Œæœ›ä¼˜åŒ–çš„è€—æ—¶æ“ä½œå¾€å¾€æœ¬èº«ä¸æ˜¯å¼‚æ­¥çš„ã€‚<code>await</code>åªèƒ½æ¥å¼‚æ­¥æ“ä½œï¼Œæ€ä¹ˆå’Œéå¼‚æ­¥çš„è€—æ—¶æ“ä½œç»“åˆå‘¢ï¼Ÿæ¯”å¦‚è¯´æœ‰è¿™æ ·ä¸€ä¸ªâ€œæ ¹æ­£è‹—çº¢â€çš„åŒæ­¥å‡½æ•°ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">string</span> <span class="title">Foo</span>(<span class="params"><span class="keyword">int</span> bar</span>)</span>&#123;</span><br><span class="line">    Wtf();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¦è®©å®ƒçš„æ‰§è¡Œå®Œæˆä½œä¸ºå‰ç½®æ¡ä»¶ï¼Œå°±å¾—æŠŠå®ƒæ”¹é€ æˆä¸€ä¸ªè¿”å›<code>Task&lt;string&gt;</code>çš„å‡½æ•°ã€‚ä½†æ˜¯å¦‚æœåŸå‡½æ•°æ˜¯ä¸å…è®¸ä¿®æ”¹çš„å‘¢ï¼Ÿä¾ç„¶æœ‰åŠæ³•ï¼Œåªè¦ç”¨<code>Task.Run(() =&gt; Foo(bar))</code>æ¥è°ƒç”¨å°±å¥½äº†ã€‚</p>
<p><code>Task.Run()</code>å¯ä»¥æŠŠä»¥ä¸‹å››ç§å§”æ‰˜åŒ…è£…æˆä»»åŠ¡ï¼Œå…¶ä¸­å¸¸ç”¨çš„æ˜¯å‰ä¸¤ç§ï¼š</p>
<ol>
<li><code>Action</code></li>
<li><code>Func&lt;TResult&gt;</code></li>
<li><code>Func&lt;Task&gt;</code></li>
<li><code>Func&lt;Task&lt;TResult&gt;&gt;</code></li>
</ol>
<p>ç”±äºLambdaè¡¨è¾¾å¼ä¹Ÿæ˜¯å§”æ‰˜ï¼Œå®Œå…¨å¯ä»¥æ„é€ ä¸€ä¸ªç¬¦åˆä¸Šè¿°ç§ç±»çš„Lambdaè¡¨è¾¾å¼ã€‚<code>() =&gt; Foo(bar)</code>æ²¡æœ‰å‚æ•°ï¼Œè¿”å›ç±»å‹ä¸º<code>string</code>ï¼Œæ˜¯ä¸€ä¸ªå—åˆ°æ”¯æŒçš„<code>Func&lt;string&gt;</code>å§”æ‰˜ã€‚å› æ­¤åœ¨è¢«<code>Task.Run()</code>åŒ…è£…ä¹‹åï¼Œå®ƒå°±èƒ½æˆä¸ºä¸€ä¸ª<code>Task&lt;string&gt;</code>ï¼Œä½œä¸ºå¼‚æ­¥è¿‡ç¨‹ä¸­çš„å‰ç½®æ¡ä»¶ã€‚</p>
<h3 id="ä½¿ç”¨è¿æ¥ç¬¦"><a href="#ä½¿ç”¨è¿æ¥ç¬¦" class="headerlink" title="ä½¿ç”¨è¿æ¥ç¬¦"></a>ä½¿ç”¨è¿æ¥ç¬¦</h3><p>å†æ¥çœ‹ä¸­é—´çš„è¿™ä¸€æ®µã€‚</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> (allTasks.Any())</span><br><span class="line">&#123;</span><br><span class="line">    Task finished = <span class="keyword">await</span> Task.WhenAny(allTasks);</span><br><span class="line">    <span class="keyword">if</span> (finished == eggsTask)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">"eggs are ready"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (finished == baconTask)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">"bacon is ready"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (finished == toastTask)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">"toast is ready"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    allTasks.Remove(finished);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>allTasks.Any()</code>ä½¿ç”¨<code>List&lt;T&gt;</code>çš„<code>Any()</code>æ–¹æ³•æ£€æŸ¥åˆ—è¡¨é‡Œæ˜¯å¦è¿˜æœ‰å‰©ä½™çš„å…ƒç´ ï¼Œå³å½“è¿˜æœ‰æœªå®Œæˆçš„ä»»åŠ¡æ—¶ï¼Œä»¤ç¨‹åºä¸€ç›´åœ¨æ­¤å¾ªç¯ï¼Œè¿™å®é™…ä¸Šç±»ä¼¼äºä¸€ä¸ªæ¶ˆæ¯å¾ªç¯æœºåˆ¶ã€‚</p>
<p><code>Task.WhenAny(allTasks)</code>æœ‰ç‚¹å„¿ç‰¹æ®Šï¼Œå®ƒæ˜¯ä¸€ä¸ª<code>Task&lt;Task&gt;</code>ï¼Œå³â€œç»“æœæ˜¯ä»»åŠ¡â€çš„ä»»åŠ¡â€”â€”åœ¨<code>allTasks</code>é‡Œçš„æŸä¸€ä¸ªä»»åŠ¡å®Œæˆæ—¶ï¼Œå®ƒæŠŠè¿™ä¸ªåˆšåˆšå®Œæˆçš„ä»»åŠ¡ä½œä¸ºè‡ªå·±çš„ç»“æœã€‚è¿™æ ·ï¼Œ<code>await</code>è¿ç®—ç¬¦å°±æå–å‡ºäº†é‚£ä¸ªåˆšåˆšå®Œæˆçš„ä»»åŠ¡ï¼Œå°†å®ƒèµ‹ç»™<code>finished</code>ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥ä½œå‡ºç›¸åº”çš„ååº”äº†ã€‚åˆ«å¿˜äº†åœ¨ä»»åŠ¡å¤„ç†å®Œä¹‹åï¼ŒæŠŠè¿™ä¸ªå®Œæˆäº†çš„ä»»åŠ¡ä»ä»»åŠ¡åˆ—è¡¨é‡Œåˆ å»ã€‚</p>
<p>å¦æœ‰ä¸€ä¸ªç±»ä¼¼çš„æ–¹æ³•æ˜¯<code>Task.WhenAll()</code>ï¼Œå®ƒæ‰€åˆ›å»ºçš„ä»»åŠ¡åœ¨å‚æ•°æ‰€è¡¨ç¤ºçš„ä¸€ç³»åˆ—ä»»åŠ¡éƒ½å®Œæˆæ—¶æ‰å®Œæˆã€‚å‘½åç©ºé—´<code>System.Threading.Tasks</code>é‡Œçš„è¿™ç±»è¾…åŠ©å¤„ç†å¤šä¸ªä»»åŠ¡çš„æ–¹æ³•è¢«ç§°ä¸ºâ€œè¿æ¥ç¬¦â€ã€‚</p>
<p>ä»¥ä¸Šå°±æ˜¯ä¸€ç§åŸºäºä»»åŠ¡çš„å¼‚æ­¥æ¨¡å¼ï¼ˆTAPï¼‰ï¼šæŠŠå¤šä¸ªä»»åŠ¡ä¸€é½å¯åŠ¨ï¼Œè®°å½•åœ¨ä»»åŠ¡åˆ—è¡¨é‡Œï¼Œç„¶åç”¨<code>await</code>ã€å¾ªç¯å’Œè¿æ¥ç¬¦æ¥ç­‰å¾…æ‰€æœ‰ä»»åŠ¡çš„å®Œæˆã€‚å¯¹äºæ¯ä¸ªä»»åŠ¡æœ¬èº«ï¼Œå¦‚æœå…·æœ‰ä¸€äº›å‰ç½®æ¡ä»¶ï¼Œå°±ä¾ç„¶ç”¨<code>await</code>æ¥ç­‰å¾…å…¶å‰ç½®æ¡ä»¶çš„å®Œæˆã€‚</p>
<h1 id="æ‰©å±•ï¼šçº¿ç¨‹æ± "><a href="#æ‰©å±•ï¼šçº¿ç¨‹æ± " class="headerlink" title="æ‰©å±•ï¼šçº¿ç¨‹æ± "></a>æ‰©å±•ï¼šçº¿ç¨‹æ± </h1><p>è‡³æ­¤ï¼Œè™½ç„¶æˆ‘ä»¬çŸ¥é“äº†æ€ä¹ˆæŠŠåŒæ­¥ä»£ç æ”¹é€ æˆå¼‚æ­¥çš„ï¼Œä½†å…¶ä¸­çš„åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>å¼‚æ­¥çš„å…³é”®æ˜¯å®šä¹‰<code>async</code>å¼‚æ­¥æ–¹æ³•å’Œç”¨<code>await</code>è¿›è¡Œå¿…è¦çš„æµç¨‹æ§åˆ¶ï¼Œè€Œè¿™ä¸¤ä¸ªå…³é”®å­—éƒ½æ˜¯å›´ç»•<code>Task&lt;TResult&gt;</code>å±•å¼€çš„ã€‚å› æ­¤è¦æ›´æ·±å…¥åœ°ç†è§£å¼‚æ­¥ï¼Œå°±è¦äº†è§£<code>Task&lt;TResult&gt;</code>çš„å·¥ä½œæœºåˆ¶ã€‚</p>
<p>Taskå·¥ä½œçš„åŸºç¡€æ˜¯çº¿ç¨‹æ± ï¼ŒC#ä¸­çš„çº¿ç¨‹æ± æ˜¯å‘½åç©ºé—´<code>System.Threading</code>ä¸­çš„<code>ThreadPool</code>é™æ€ç±»ã€‚å…³äºçº¿ç¨‹æ± å’Œå¤šçº¿ç¨‹åˆå¯ä»¥äº‹æ— å·¨ç»†åœ°å†™ä¸€ç¯‡é•¿æ–‡ï¼Œè¿™é‡Œå…ˆä½œç®€è¦çš„è®°å½•ã€‚</p>
<p>æ¯ä¸€ä¸ªè¿›ç¨‹éƒ½å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œé‡Œé¢æœ‰é¢„å…ˆåˆ›å»ºå¥½çš„ä¸€å¤§å †ç©ºé—²çº¿ç¨‹ã€‚å½“ä¸€ä¸ªä»»åŠ¡éœ€è¦ç”¨çº¿ç¨‹å¤„ç†çš„æ—¶å€™ï¼Œå°±æ— éœ€ä¸´æ—¶å•ç‹¬åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œå¯ä»¥ç›´æ¥ä»çº¿ç¨‹æ± é‡Œæ‰¾ä¸€ä¸ªç©ºé—²çš„æ¥è·‘ã€‚è·‘å®Œä¹Ÿä¸ç”¨è´¹åŠ²å°†çº¿ç¨‹é”€æ¯ï¼Œå®ƒä¼šè¢«çº¿ç¨‹æ± å›æ”¶ï¼Œç­‰å¾…å…¶å®ƒä»»åŠ¡æ¥åˆ©ç”¨ã€‚å‡å¦‚è¦å¤„ç†çš„ä»»åŠ¡å¤ªå¤šï¼Œå¯¼è‡´çº¿ç¨‹æ± é‡Œæ‰€æœ‰çš„çº¿ç¨‹éƒ½åœ¨å¿™ç¢Œï¼Œçº¿ç¨‹æ± å¯èƒ½ä¼šåˆ›å»ºæ–°çº¿ç¨‹ï¼Œä¹Ÿå¯èƒ½è®©ä»»åŠ¡ç­‰å¾…ç©ºé—²çº¿ç¨‹çš„å‡ºç°ã€‚</p>
<p>çº¿ç¨‹æ± ä¹Ÿæœ‰ç¼ºç‚¹ã€‚ç”±äºæ± é‡Œçº¿ç¨‹çš„ä¸€åˆ‡å·¥ä½œéƒ½æ˜¯ç”±CLRæ‰˜ç®¡çš„ï¼ˆè¿™åˆæ˜¯ä¸€ä¸ªå¤©å‘ï¼‰ï¼Œè™½ç„¶ç”¨èµ·æ¥æ˜¯ç®€å•äº†ï¼Œä½†ä½ æ— æ³•å¯¹è¿™äº›çº¿ç¨‹è¿›è¡Œå…·ä½“çš„æ“ä½œï¼Œä¸€æ—¦æŠŠä»»åŠ¡åŠ è¿›é˜Ÿåˆ—é‡Œä¹Ÿæ²¡æ³•å–æ¶ˆï¼ˆä¸è¦åœä¸‹æ¥å•Šï¼ï¼‰ã€‚ä¸è¿‡éƒ½è¦ç”¨ä¸Šçº¿ç¨‹æ± äº†ï¼Œé‚£ä¸æ˜¯ä¸€æŠŠæ¢­è·‘å°±å®Œäº‹äº†å˜›ï¼Œè°è¿˜å¸Œæœ›è®©ä»»åŠ¡åœä¸‹æ¥å‘¢ï¼Ÿ</p>
<p>ä½¿ç”¨çº¿ç¨‹æ± çš„æ–¹æ³•æ˜¯åˆ©ç”¨<code>QueueUserWorkItem()</code>æ–¹æ³•ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ThreadPool.QueueUserWorkItem æ–¹æ³•</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">QueueUserWorkItem</span> (<span class="params">System.Threading.WaitCallback callBack</span>)</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">bool</span> <span class="title">QueueUserWorkItem</span> (<span class="params">System.Threading.WaitCallback callBack, <span class="keyword">object</span> state</span>)</span>;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ–¹æ³•æŠŠä¸€é¡¹å·¥ä½œæ·»åŠ åˆ°çº¿ç¨‹æ± çš„å·¥ä½œé˜Ÿåˆ—ä¸­ï¼Œä¸€æ—¦çº¿ç¨‹æ± æœ‰ç©ºé—²çº¿ç¨‹ï¼Œå°±ä¼šä»é˜Ÿåˆ—é‡Œå–å‡ºå·¥ä½œæ¥æ‰§è¡Œã€‚</p>
<p>å…¶ä¸­ï¼Œ<code>WaitCallback</code>æ˜¯ä¸€ä¸ªå§”æ‰˜ï¼Œå®ƒæ¥æ”¶<code>object</code>ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›<code>void</code>ï¼Œç±»ä¼¼<code>Action&lt;object&gt;</code>ã€‚</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">System.Runtime.InteropServices.ComVisible(true)</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">delegate</span> <span class="keyword">void</span> <span class="title">WaitCallback</span>(<span class="params"><span class="keyword">object</span> state</span>)</span>;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼Œç”±äºå§”æ‰˜å‚æ•°çš„<a href="https://hakurei.red/2020/03/02/C-%E6%9D%82%E8%AE%B0%E4%B9%8B%E8%B4%B0/">é€†å˜æ€§</a>ï¼ˆæˆ‘é ï¼Œå±…ç„¶åœ¨è¿™é‡Œç”¨ä¸Šäº†å‰é¢å­¦çš„é€†å˜ï¼‰ï¼Œè¿™é‡Œä»…èƒ½ä½¿ç”¨<code>object</code>æˆ–æ´¾ç”Ÿç¨‹åº¦æ›´ä½çš„ç±»å‹çš„å‚æ•°ã€‚ç”±äº<code>object</code>å·²ç»æ˜¯æœ€ç»ˆåŸºç±»ï¼Œæ•…åªèƒ½ç”¨å®ƒã€‚</p>
<p>ä½†<code>object</code>å¯æ˜¯å•¥éƒ½æ²¡æœ‰å•Šï¼Ÿå¦‚æœè¦å®‰æ’ä¸€ä¸ªå¸¦æœ‰ä»»åŠ¡ä¿¡æ¯çš„å§”æ‰˜ä½œä¸ºä»»åŠ¡ï¼Œæ€ä¹ˆæŠŠä¿¡æ¯å°åœ¨é‡Œé¢ï¼Ÿ</p>
<p>ä¸ºäº†è§£ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆçœ‹<code>QueueUserWorkItem</code>çš„åä¸€ä¸ªé‡è½½ã€‚å‚æ•°é™¤äº†<code>WaitCallback</code>ç±»å‹çš„å§”æ‰˜<code>callBack</code>ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>object state</code>ï¼Œå®ƒå°±æ˜¯å§”æ‰˜è°ƒç”¨æ—¶ä½¿ç”¨çš„å‚æ•°ã€‚ç”±äºåå˜æ€§ï¼Œä½ å¯ä»¥æŠŠä»»ä½•ç±»å‹è§†ä½œ<code>object</code>ï¼Œä¹Ÿå°±å¯ä»¥åœ¨è°ƒç”¨å§”æ‰˜æ—¶ä¼ å…¥ä»»æ„ç±»å‹çš„å‚æ•°ã€‚è€Œå‰ä¸€ä¸ªé‡è½½çš„å‚æ•°åˆ—è¡¨ä¸­æ²¡æœ‰<code>object state</code>ï¼Œæ˜¯ç»™æ— éœ€åœ¨è°ƒç”¨æ—¶ä¼ å…¥å‚æ•°çš„å§”æ‰˜ä½¿ç”¨çš„ï¼Œç±»ä¼¼<code>Action</code>ã€‚</p>
<p><strong>å¦‚æ­¤ä¸€æ¥å°±å¾ˆæ˜ç™½äº†ï¼Œæ”¯æŒæ·»åŠ åˆ°çº¿ç¨‹æ± å·¥ä½œé˜Ÿåˆ—é‡Œçš„å·¥ä½œæ˜¯è¿™æ ·çš„å‡½æ•°ï¼šè¿”å›ç±»å‹ä¸º<code>void</code>ï¼Œå‚æ•°åˆ—è¡¨ä¸­æœ‰0æˆ–1ä¸ªä»»æ„ç±»å‹çš„å‚æ•°ã€‚</strong></p>
<h1 id="æœªç«Ÿä¹‹æ—…"><a href="#æœªç«Ÿä¹‹æ—…" class="headerlink" title="æœªç«Ÿä¹‹æ—…"></a>æœªç«Ÿä¹‹æ—…</h1><p>åŸæœ¬è¿™é‡Œåº”è¯¥æœ‰æ›´å¤šå…³äºTaskå’Œawaitå·¥ä½œåŸç†çš„å†…å®¹ï¼Œä½†å½“æˆ‘åœ¨C#æ–‡æ¡£çš„è¿·å®«ä¸­èµ°å¾—æ„ˆå‘æ·±å…¥æ—¶ï¼Œæˆ‘å‘ç°æˆ‘çš„ç†è§£è¢«ä¸æ–­æ¨ç¿»ï¼Œæ¯”å¦‚è¯´ç”¨asyncå’Œawaitå®ç°çš„å¼‚æ­¥å®é™…ä¸Šæ˜¯å•çº¿ç¨‹çš„ï¼Œä½†å®ƒä»¬æ‰€å›´ç»•çš„Taskåˆå’Œç”¨çº¿ç¨‹æ± å®ç°çš„å¤šçº¿ç¨‹å¯†ä¸å¯åˆ†ã€‚</p>
<p>æˆ‘è¯•å›¾ç†æ¸…è¿™ä¸€åˆ‡åˆ°åº•æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œè¿™æ—¶å›è°ƒå‡½æ•°ã€æ¶ˆæ¯å¾ªç¯ã€çº¿ç¨‹è°ƒåº¦ã€ç¼–è¯‘åŸç†è¿™å‡ åªæ€ªç‰©éƒ½è·‘äº†å‡ºæ¥ï¼Œç”šè‡³å°†ä¸€åˆ‡éƒ½æŒ‡å‘äº†JavaScriptï¼Œå‘Šè¯‰æˆ‘æ˜¯æ—¶å€™æ•¬è€Œè¿œä¹‹äº†ã€‚</p>
<p>å› æ­¤ï¼Œç›®å‰è¿™ç¯‡ç¬”è®°æ˜¯ååˆ†æ²¡æœ‰æ·±åº¦çš„ä¸€ç¯‡ï¼Œå®ƒæœ‰å¤ªå¤šå¯ä»¥å†™ä¹Ÿéœ€è¦å†™çš„å†…å®¹äº†ã€‚C#æˆ‘è¿˜æœ‰æ›´å¤šçš„ä¸œè¥¿ä¸€çŸ¥åŠè§£ï¼Œç›®å‰åœ¨æ­¤è€ƒæ®æŠ€æœ¯ç»†èŠ‚æ˜¯ä¸æ˜æ™ºçš„ã€‚ä½†è¿‡æ®µæ—¶é—´æˆ‘è¿˜ä¼šç»§ç»­åˆ¨æ ¹ç©¶åº•ï¼Œç°åœ¨å°†éå¸¸å…·æœ‰å‚è€ƒä»·å€¼çš„ä¸€ç¯‡StackOverflowé—®é¢˜é“¾æ¥è´´åœ¨è¿™é‡Œï¼š</p>
<p><a href="https://stackoverflow.com/questions/37419572/if-async-await-doesnt-create-any-additional-threads-then-how-does-it-make-appl" target="_blank" rel="noopener">If async-await doesnâ€™t create any additional threads, then how does it make applications responsive?</a></p>
<p>ä»¥åŠä¹‹å‰æˆ‘ç”»çš„<strong>ç†è§£é”™è¯¯</strong>çš„ç¤ºæ„å›¾ï¼š</p>
<p><img src="https://i.loli.net/2020/04/08/7TIPufG6oAm2cOd.png" alt="BreakfastAsync.png"></p>
<blockquote>
<p>ä¸‹ä¸€æ­¥ï¼Œåº”è¯¥æ˜¯å›è¿‡å¤´å»ææ¸…æ¥šé›†åˆã€åˆ—è¡¨ã€æ•°ç»„ï¼Œè¿˜æœ‰ç›¸å…³çš„æ¥å£å’Œç´¢å¼•å™¨å•¥çš„ã€‚</p>
</blockquote>

    </div>

    
    
    
        <div id="wechat_subscriber" style="display: block; padding: 10px 0; margin: 20px auto; width: 100%; text-align: center;">
  <img id="wechat_subscriber_qcode" src="https://i.loli.net/2020/04/15/glvwN8eEY3MHiTS.png" alt="Macyrate wechat" style="width: 200px; max-width: 100%;">
  <div>å”¯ä¸€æŒ‡å®šå¾®ä¿¡</div>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag"># ç¬”è®°</a>
              <a href="/tags/C-Sharp/" rel="tag"># C Sharp</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
                <a href="/2020/04/04/200404/" rel="next" title="200404ï¼šæ¸…æ˜è¿½æ€">
                  <i class="fa fa-chevron-left"></i> 200404ï¼šæ¸…æ˜è¿½æ€
                </a>
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
                <a href="/2020/04/15/C-%E6%9D%82%E8%AE%B0%E4%B9%8B%E4%BC%8D%EF%BC%9A%E6%95%B0%E7%BB%84%E4%B8%8E%E9%9B%86%E5%90%88/" rel="prev" title="C#æ‚è®°ä¹‹ä¼ï¼šæ•°ç»„ä¸é›†åˆ">
                  C#æ‚è®°ä¹‹ä¼ï¼šæ•°ç»„ä¸é›†åˆ <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    <div class="comments" id="gitalk-container"></div>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ä½•ä¸ºå¼‚æ­¥"><span class="nav-number">1.</span> <span class="nav-text">ä½•ä¸ºå¼‚æ­¥</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æ€ä¹ˆä½¿ç”¨"><span class="nav-number">2.</span> <span class="nav-text">æ€ä¹ˆä½¿ç”¨</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ç”¨æ—©é¤æ¯æ‰ç¾å¥½çš„ä¸€å¤©"><span class="nav-number">2.1.</span> <span class="nav-text">ç”¨æ—©é¤æ¯æ‰ç¾å¥½çš„ä¸€å¤©</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¼‚æ­¥åšæ—©é¤"><span class="nav-number">2.2.</span> <span class="nav-text">å¼‚æ­¥åšæ—©é¤</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#å®šä¹‰å¼‚æ­¥æ–¹æ³•"><span class="nav-number">2.2.1.</span> <span class="nav-text">å®šä¹‰å¼‚æ­¥æ–¹æ³•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è®¾ç½®å‰ç½®æ¡ä»¶"><span class="nav-number">2.2.2.</span> <span class="nav-text">è®¾ç½®å‰ç½®æ¡ä»¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ä½¿ç”¨è¿æ¥ç¬¦"><span class="nav-number">2.2.3.</span> <span class="nav-text">ä½¿ç”¨è¿æ¥ç¬¦</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æ‰©å±•ï¼šçº¿ç¨‹æ± "><span class="nav-number">3.</span> <span class="nav-text">æ‰©å±•ï¼šçº¿ç¨‹æ± </span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æœªç«Ÿä¹‹æ—…"><span class="nav-number">4.</span> <span class="nav-text">æœªç«Ÿä¹‹æ—…</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <img class="site-author-image" itemprop="image" alt="Macyrate"
    src="https://i.loli.net/2020/02/23/5FnPOvDaUVpytfX.jpg">
  <p class="site-author-name" itemprop="name">Macyrate</p>
  <div class="site-description" itemprop="description">&nbsp;&nbsp;æ°£éœ½é¢¨æ¢³æ–°æŸ³é«®ï¼Œ<br>&nbsp;&nbsp;å†°æ¶ˆæµªæ´—èˆŠè‹”é ˆã€‚</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">42</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Macyrate" title="GitHub &amp;rarr; https:&#x2F;&#x2F;github.com&#x2F;Macyrate" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:macyrate@foxmail.com" title="E-Mail &amp;rarr; mailto:macyrate@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/6010944415" title="Weibo &amp;rarr; https:&#x2F;&#x2F;weibo.com&#x2F;6010944415" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://steamcommunity.com/profiles/76561198313695590/" title="Steam &amp;rarr; https:&#x2F;&#x2F;steamcommunity.com&#x2F;profiles&#x2F;76561198313695590&#x2F;" rel="noopener" target="_blank"><i class="fa fa-fw fa-steam"></i>Steam</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-sa.svg" alt="Creative Commons"></a>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title">
      <i class="fa fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.viseator.com/" title="https:&#x2F;&#x2F;www.viseator.com&#x2F;" rel="noopener" target="_blank">viseator</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.llgzone.com/" title="https:&#x2F;&#x2F;blog.llgzone.com&#x2F;" rel="noopener" target="_blank">Lean</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://jushen.xyz/" title="http:&#x2F;&#x2F;jushen.xyz&#x2F;" rel="noopener" target="_blank">JuShenå·¨ç¥</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://sukunahust.com/" title="http:&#x2F;&#x2F;sukunahust.com&#x2F;" rel="noopener" target="_blank">Sukuna</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://touhoudog.net/" title="http:&#x2F;&#x2F;touhoudog.net&#x2F;" rel="noopener" target="_blank">å……æ»¡é­”åŠ›çš„åœŸåœ°ä¸‹</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://kourindou.exblog.jp/" title="https:&#x2F;&#x2F;kourindou.exblog.jp&#x2F;" rel="noopener" target="_blank">åšéº—å¹»æƒ³æ›¸è­œ</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  &copy; 2016 â€“ 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Macyrate & Hakurei Reimu</span>
</div>
  <div class="powered-by">ç”± <a href="https://thwiki.cc/%E5%8D%9A%E4%B8%BD%E7%81%B5%E6%A2%A6/%E4%B8%80%E8%AE%BE%E8%B5%84%E6%96%99" class="theme-link" rel="noopener" target="_blank">åšéº—å¤§çµç•Œ</a> å¼ºåŠ›é©±åŠ¨
  </div>

        
<div class="busuanzi-count">
  <script pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>












        
      </div>
    </footer>
  </div>

  


  
  <style>
  
  button.darkmode-toggle, .darkmode-layer {
  z-index: 500;
  }

  
  img, .darkmode-ignore {
    isolation: isolate;
    display: block;
  }
  </style>
  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  <script src="https://cdn.jsdelivr.net/npm/darkmode-js/lib/darkmode-js.min.js"></script>



<script>
var options = {
  bottom: '64px', // default: '32px'
  right: '32px', // default: '32px'
  left: 'unset', // default: 'unset'
  time: '0.5s', // default: '0.3s'
  mixColor: '#fff', // default: '#fff'
  backgroundColor: '#f5f7f9',  // default: '#fff'
  buttonColorDark: '#100f2c',  // default: '#100f2c'
  buttonColorLight: '#fff', // default: '#fff'
  saveInCookies: false, // default: true,
  label: 'ğŸŒ“', // default: ''
  autoMatchOsTheme: false // default: true
}
const darkmode = new Darkmode(options);
darkmode.showWidget();
// window.onload = function(){
//   setTimeout(
//     function() {
//       document.getElementsByClassName('darkmode-toggle')[0].click();
//     },
//     550,
//   );
//   document.getElementsByClassName('darkmode-toggle')[0].click();
// }
</script><script src="/js/utils.js?v=7.4.1"></script><script src="/js/motion.js?v=7.4.1"></script>
<script src="/js/schemes/pisces.js?v=7.4.1"></script>
<script src="/js/next-boot.js?v=7.4.1"></script>
  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.getAttribute('pjax') !== null) {
      element.setAttribute('pjax', '');
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  
  <script pjax>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>






  <script src="/js/local-search.js?v=7.4.1"></script>












    <div id="pjax">

  

  

  

<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/macyrate/gitalk@2.0.0/dist/gitalk.css">

<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/gh/macyrate/gitalk@2.0.0/dist/gitalk.min.js', () => {
    var gitalk = new Gitalk({
      clientID: 'aa2288c6cbb5322cac6b',
      clientSecret: '63492ee584a83a8479f1408f33e2ca04e3ef9f82',
      repo: 'Macyrate.github.io',
      owner: 'macyrate',
      admin: ['macyrate'],
      id: '1ef7529969a4f7a843ad0e8ac3597c69',
        language: 'zh-CN',
      distractionFreeMode: 'true'
    });
    gitalk.render('gitalk-container');
  }, window.Gitalk);
</script>

    </div>
</body>
<div id="contentleft">
  <div class="aplayer" 
  data-fixed="true" 
  data-autoplay="true" 
  data-order="random" 
  data-volume="0.55" 
  data-theme="#cc543a" 
  data-preload="auto" 
  ></div>
</div>
</html>