---
title: 能不能好好上网-壹
tags:
- 折腾
- 计算机网络
---
**能不能好好上网？**

在中国，很难。

# 故事背景

我对网络的探索与折腾，源于每台Windows电脑都自带的“远程桌面连接”。和“公文包”与“媒体库”一样，这种系统里的隐秘角落就像等待人去探险的洞窟和密林，激发着我的好奇心。

![远程桌面连接](https://i.loli.net/2020/08/05/FcrqSmxuBWz9e8a.png)

到底要怎样使用这个东西呢？尤其是，当发现计算机名竟然可以随意更改时，我产生了担心：如果有重名的计算机，我怎么知道要连到哪一台呢？

以此为契机，我了解到了局域网，IP和3389端口的概念——巧合的是，我目前的手机尾号就是`3389`，而前半部分则恰好可以写作一个IPv4地址。那时，中国的网络用户数量远不如今天，大部分设备都有公网IP。可能也正因如此，诸如CS1.6，War3和东方非想天则一类基于IP联机的游戏能够风靡一时。

时代变了。匮乏的IPv4地址资源遇上万物互联的爆发式增长势头，NAT一层套一层，再也没法畅快地IP直连，人们在网络里也像居住于水泥丛林间的鸽子笼，失却了那种田间地头吆喝一嗓子的快意。

在演变到今天状况的前两年，大家还有动态的公网IPv4地址，而不是被圈养在运营商的“大内网”里，那段时间我还能进行一些“叠床架屋”的操作来胡作非为。

我在树莓派上弄了一个简单的Python脚本，每隔一小时检查路由器的公网IP，如果发生了变动就用邮件形式发出通知。再配合路由器上配置的端口转发和IP-MAC绑定，我就能在外访问到局域网里某台设备的具体端口。虽然后来改用了更方便的TeamViewer，但很长一段时间里，我就是这样在实验课机房里连接寝室中的台式机来写代码的。如今看来，我这操作基本就是实现了一个“低配版”的DDNS服务。

那么，说回现在。

# 无源光网络PON

这半个多月的培训期间我虽然挺摸，但也不是白学的。

首先，要从网络的宏观结构讲起。放到可能是最宏观的角度，整个通信网络就分为三层：

1. 核心层
2. 汇聚层
3. 接入层

`PON`(Passive Optical Network)所在的就是接入层。简而言之，它不用电，而是用完全的光线路将终端设备与“局端”，即运营商的机房连接起来。

这个过程中，运营商机房里的终端设备叫做光线路终端`OLT`(Optical Line Terminal)，你家弱电箱里连接光纤的光猫属于光网络单元`ONU`(Optical Network Unit)。这两者之间的线路则称为光分配网`ODN`(Optical Distribution Network)，由光纤光缆和光缆交接箱、光分路器等各种设备组成，最终把机房的光纤连入千家万户。这个部分是PON网络中

![烽火OLT AN6000](https://i.loli.net/2020/08/06/H6TtIV3QYKRnZek.jpg)

![光交箱](https://i.loli.net/2020/08/06/pWMHZyJ2tDA8Sua.jpg)

> Across the Great Wall we can reach every corner in the world.