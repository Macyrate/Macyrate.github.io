---
title: 为小米手环4制作自定义表盘
date: 2020-01-11 22:10:43
tags:
- 折腾
---
![小米手环4](https://raw.githubusercontent.com/Macyrate/Macyrate.github.io/photo/%E5%B0%8F%E7%B1%B3%E6%89%8B%E7%8E%AF4.jpeg)

在以100元的低价将Pebble Time转让给同学之后，今天买到了小米手环4NFC版。说实话Pebble是真的好用，可惜反射屏带来的续航依旧不是那么完美，而且人在国内，这些东西还是与国内的“生态”接轨比较好。

拿到新电子产品，当然得瞎折腾一阵。首先就得换个表盘。但可惜，小米运动APP里的自定义表盘仅仅支持3种预置布局下的背景图自定义，这显然不够酷。

不过，在[米坛](https://www.bandbbs.cn/)这个网站我找到了真正意义上自定义表盘的方法，而且[amazfitwatchfaces](https://amazfitwatchfaces.com/)上已经有了相当多的自定义表盘。但是我想要继续使用曾经在Pebble上用的[EVA表盘](https://apps.rebble.io/zh_CN/application/529ab1b6d17b5033ba000033)，发现网上并没有现成资源后我决定自己制作。

简单地说，小米手环4的表盘是由一个`json`文件控制布局的一系列图片构成的。这个[注释版万能json](https://www.bandbbs.cn/threads/533/)展示了该json文件的形式。将自定义的json文件与资源文件，即要显示的一系列图片，经过[MB4 Resource pack/unpack](https://geekdoing.com/threads/mb4-resource-pack-unpack.1383/)工具打包后就能生成表盘`bin`文件了。

```json
...

"Time": {
    "Hours": {
      "Tens": {
        "X": 70,
        "Y": 10,
        "ImageIndex": 23,
        "ImagesCount": 3
      },
      "Ones": {
        "X": 70,
        "Y": 60,
        "ImageIndex": 11,
        "ImagesCount": 10
      }
    },

...
```

以这段json代码为例，它控制表盘中时间部分的小时显示。

X和Y是图片左上角的坐标。这里的`ImageIndex`是指资源图片的起始编号，是其4位数字的文件名。而`ImageCount`是从起始图片开始向后有多少张图片被此处使用。由于是24小时制——12小时制也许也可以，但我不知道如何设置——小时需要用到表示`0`、`1`、`2`的3张图片。需要注意的是，资源图片的编号必须从`0000`开始连续，且所有的图片都要在json中被使用到，否则无法正常生成。

最后的效果：

![](https://raw.githubusercontent.com/Macyrate/EVA_font_watchface/master/else/EVA_font_packed_animated.gif)

> 发布地址：    
> [amazfitwatchfaces](https://amazfitwatchfaces.com/mi-band-4/view/11723)   
> [GitHub](https://github.com/Macyrate/EVA_font_watchface)